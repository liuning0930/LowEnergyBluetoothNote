* 九、安全
** 安全概念
安全性包含了下列内容：
1. 认证
   下列两种基本方法：
   a. 初始认证和秘密共享
   b. 使用预先功效的秘密重新认证
2. 授权
   两种方式：
   a. 文档提供授权
   b. 直接进行授权
3. 完整性
4. 机密性
5. 隐私
6. 加密引擎
7. 共享机密
   低功耗蓝牙主要有五个秘钥：
   a. 临时秘钥(TK)
   b. 短期秘钥(STK)
   c. 长期秘钥(LTK)
   d. 身份解析秘钥(IRK)
   e. 连接签名解析秘钥(CSRK)
** 配对和绑定
配对有三个不同的阶段：
a. 配对信息交换
b. 链路认证
c. 秘钥分配
*** 配对信息交换
配对的第一阶段涉及配对信息的交换，该信息用于确定设备的配对方式。
从设备发起配对请求信息，主设备回复配对响应信息。
*** 认证
利用配对请求和配对响应所携带的信息，两个设备得以确定适合的配对算法。
*** 秘钥分配
连接了一旦利用STK加密，就可以分配所需的秘钥了。这些秘钥每次分配一个，因其长度为128位，灭一个数据包只能装进一个。
以下秘钥可以分配：
a. LTK
b. IRK
c. CSRK
** 绑定
绑定真正来说属于通用访问规范的讨论范畴。绑定指将秘钥及相关身份信息保存到安全数据库中。如果设备不保存这些值，他们虽能配对，但却不能绑定。只要当中某一个设备不保存，重新连接后，只有一个设备拥有
LTK, 因此加密的启动将会失败。
为了避免这种情况，两个设备在最初配对时就会交换绑定信息，从而能够清楚地知道对方是否保留了该绑定信息。如果对方设备不保存信息，那么一旦启动加密的尝试失败，主机将试图在次配对。
** 数据签名
第一次配对的时候交换CSRK(连接签名解析秘钥)。
